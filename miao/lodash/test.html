<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    function type(arg) {
      if (arg !== arg) return 'NaN'
      if (typeof (arg) !== 'object') {
        return (typeof (arg))
      } else if (Array.isArray(arg)) {
        return 'array'
      } else if (!arg) {
        return 'null'
      } else {
        return 'object'
      }
    }

    function remove(array, fun) { //fun(array[i])为真,删除当前元素,并递归删除所有满足fun(为真的)元素,原地删除
      let flag = 1
      for (let i = 0; i < array.length; i++) {
        if (fun(array[i], i, array)) {
          flag = 0
          for (let j = i; j < array.length; j++) {
            array[j] = array[j + 1]
          }
          array.length = array.length - 1
          break
        }
      }
      if (flag) {
        return array
      } else {
        return remove(array, fun)
      }
    }

    function isEqual(a, b) {
      if (type(a) !== type(b)) {
        return false
      } else if (a !== a && b !== b) {
        return true
      } else if (type(a) === 'object') {
        for (let i in a) {
          if (!b[i] || !isEqual(a[i], b[i])) {
            return false
          }
        }
        for (let j in b) {
          if (!a[j] || !isEqual(a[j], b[j])) {
            return false
          }
        }
        return true
      } else if (type(a) === 'array') {
        if (a.length !== b.length) {
          return false
        } else {
          for (let i = 0; i < a.length; i++) {
            if (!isEqual(a[i], b[i])) {
              return false
            }
          }
        }
        return true
      } else if (type(a) === 'number' || type(a) === 'string' || type(a) === 'boolean' || type(a) === 'undefined') {
        return a === b
      } else {
        return true
      }
    }

    function i2(a) { //string 返回  o[a] 
      if (type(a) == 'string') {
        return function (o) {
          return o[a]
        }
      } else if (type(a) == 'array') {
        return function (o) {
          if (a[0] in o && o[a[0]] === a[1]) {
            return true
          } else {
            return false
          }
        }
      } else if (type(a) == 'object') {
        return function (o) {
          for (let i in a) {
            if (!(i in o) || o[i] !== a[i]) {
              return false
            }
          }
          return true
        }
      } else {
        return a
      }
    }

    function concat() {
      if (!arguments[0]) return undefined
      let arr = arguments[0]
      for (let i = 1; i < arguments.length; i++) {
        if (Array.isArray(arguments[i])) {
          for (let j = 0; j < arguments[i].length; j++) {
            arr.push(arguments[i][j])
          }
        } else if (arguments[i] !== undefined && arguments[i] !== null && arguments[i] == arguments[i]) arr.push(
          arguments[i])
      }
      return arr
    }

    //测试代码
    function uniqWith(array, comparator) {
      let f = i2(comparator)
      console.log(f);
      let res = []
      console.log(array);
      console.log(res);
      array.forEach((a, b, c) => {
        res.forEach((d, e, f) => {
          if (comparator(a, d)) {
            res[e] = 0
          }
        })
      })
      return res.filter((a) => a == 0)
    }
    console.log(uniqWith([{
      "x": 1,
      "y": 2
    }, {
      "x": 2,
      "y": 1
    }, {
      "x": 1,
      "y": 2
    }], isEqual))
  </script>
</body>

</html>